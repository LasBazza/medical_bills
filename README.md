# Medical bills

Приложения для обработки данных медицинских счетов компаний клиентов.

Данные принимаются в формате таблицы Excel, обрабатываются и сохраняются в базу данных. Реализованы эндпойнты получения списка клиентов и их счетов.

### Стек

- Python 3.10
- Django 4.0
- Django Rest Framework 3.13.1
- SQLite

## Запуск проекта
1. Склонировать проект

2. в папке ```/config``` создать файл ```.env```, по образцу файла ```.env.dist```, лежащего в той же папке.

3. из папки с проектом запустить команду ```docker-compose up```


## Документация API

Корневой адрес API http://127.0.0.1/api/

#### Эндпоинт загрузки данных 
```url```: ```upload_data/```

```method```: ```POST```

```body parametrs```: ```file``` - файл в формате .xlsx или .xls

```query perametrs```: ```data_type``` - тип загружаемых данных, принимаемые значения ```clients```, ```organizations```, ```bills```

Для загрузки таблицы клиентов необходимо в теле запроса передать файл ```client_org.xlsx``` и передать параметр ```data_type = clients```. 

Для загрузки таблицы организаций необходимо в теле запроса передать файл ```client_org.xlsx``` и передать параметр ```data_type = organizations```.

Для загрузки таблицы счетов необходимо в теле запроса передать файл ```bills.xlsx``` и передать параметр ```data_type = bills```.

Последовательность загрузки данных: Клиенты -> Организации -> Счета

#### Эндпоинт получения списка клиентов
```url```: ```clients/```

```method```: ```GET```

Возвращает список клиентов с количеством связанных организаций и суммой выплат по всем счетам компаний клиента.

#### Эндпоинт получения списка счетов
```url```: ```bills/```

```method```: ```GET```

```query perametrs```: ```client_name``` - фильрация по имени пользователя, ```client_org``` - фильрация по названию организации
